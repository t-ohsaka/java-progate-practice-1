
# オブジェクト指向

難しいソフトウェア開発を楽に行うための総合技術

ソフトウェアの保守や再利用をしやすくすることを目的とした技術

部品の独立性を高め、その部品を組み合わせてシステム全体の機能を作っていく

*「オブジェクト指向を使うと、現実世界をそのままプログラムとして表現できる」というのは間違い*

## オブジェクト指向と現実世界の違い

### クラスとインスタンスの関係性の違い

現実世界では、インスタンスがあり、それをクラスに分類している 
が、  
オブジェクト指向では、クラスを元にインスタンスを生成する

## クラスとポリモーフィズムと継承

*プログラムの無駄を省いて整理整頓するための仕組み*

クラスとポリモーフィズムと継承は、ソフトウェアの保守性や再利用性を高めるための仕組みとして割り切るしかない。

- クラス：変数とサブルーチンをひとまとめにして、独立性の高い部品をつくる仕組み
- ポリモーフィズムと継承：コードの重複を排除して、汎用性の高い部品をつくる仕組み
- インスタンス：実行時にインスタンス変数をヒープ領域に展開する仕組み。これによって、クラスをシンプルに保つことができる

### 保守性

保守しやすくするには、変数の値が変更される箇所が限定されるほうがいい。  
→バグが有った時に、原因を探しやすい

- 対応策１：ローカル変数
- 対応策２：値渡し

#### ローカル変数

サブルーチン間で共通にアクセスする変数を減らすための仕組み。

これを使うことで、サブルーチン間の独立性が高くなる。  
単体でも動かせるようになる

ローカル変数は、サブルーチン呼び出しが終わると消えてしまう変数。  
サブルーチンが終わった後も値を保持したい場合、グローバル変数に保持させるしかなかった...

> グローバル変数はプログラム内のどこからでもアクセスできてしまうため、影響範囲が大きすぎる。グローバル変数は使いたくない...

## クラス

関連性の強いサブルーチン（関数）とグローバル変数を１つにまとめて少し大きな部品として扱えるようにする仕組み  

クラスの機能は以下の３つ

- まとめる (サブルーチンと変数をまとめる)
- 隠す (クラス内部のみの変数やサブルーチンを定義)
- たくさん作る (１つのクラスからインスタンスをいくつも作れる)

### まとめる

クラスという仕組みを使うことで、ばらばらになっていたグローバル変数と関数をまとめて整理できる。

データと処理をまとめるということ。

オブジェクト指向では、まとめられたサブルーチンのことをメソッドと呼び、グローバル変数のことをインスタンス変数と呼ぶ。

```java
// 例：FileReaderクラス(適当に定義した)

class FileReader {
    // インスタンス変数
    private String path;

    // メソッド
    public String read() {
        ...
    }
}
```

また、クラス内で定義される要素の名前は、クラス内で重複しなければいいということになっている。  
そのため、他のクラスのことを考えずに名前を定義できる。

クラス名を適切につけることで、どのクラスにどの処理があるかが明確になるため、サブルーチンを探すのが楽になる。

### 隠す

インスタンス変数に`private`というアクセス修飾子をつけるだけで、他のクラスからは直接アクセスすることができなくなる。  
こうすることで、そのインスタンス変数の値を変えられる箇所が限定されるため、バグがの原因が探しやすくなる。

また、`public`というアクセス修飾子をつかうことで外部に公開することもできる。

```java
// 例：FileReaderクラス(適当に定義した)

class FileReader {
    // 非公開のため、外部からはアクセスできない
    private String path;

    // 外部からアクセスできる
    public String read() {
        ...
        // インスタンス変数pathを使った処理を行うと思う
    }
}
```

### たくさん作る

インスタンスは現実世界に存在するモノをそのまま表現するのではなく、*クラスで定義したインスタンス変数が確保されるメモリ領域*と考えるべき！

> 「現実世界に存在するモノをそのまま表現」とは、犬クラスからポチというインスタンスが...みたいな

インスタンスはクラスを定義しておけば、実行時になんこでも作成できる  
→メモリ領域をたくさん確保できる

インスタンスがたくさんできてしまうと、メソッドを呼び出した時にどのインスタンスのメソッドを呼び出すのかがわからなくなってしまう。そのため、オブジェクト指向では、以下のようにメソッドを呼び出す。

```java
インスタンスを格納する変数名.メソッド名(引数)
```

例

```java
FileReader fr1 = FileReader();
FileReader fr2 = FileReader();

String text1 = fr1.read();
String text2 = fr2.read();
```

このようにコーディングできるため、クラスを定義するときには、インスタンスが複数あるということを全く意識しなくていい！

## ポリモーフィズム


